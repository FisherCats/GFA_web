# 连接查询
 - ## **说明**
   连接查询 : 将多张表连到一起进行查询 (会导致 **记录数行** 和 **字段数列** 发生改变)
 - ## **连接查询的意义**  
    在关系型数据库设计过程中，实体(表)与实体之间是存在很多联系的。在关系型数据库表的设计过程中，遵循着关系来设计: 一对一，一对多和多对多，通常在实际操作的过程中，需要利用这层关系来保证数据的完整性。
 - ## **连接查询分类**  
   >交叉连接。  
   内连接。  
   外连接 : 左外连接 (左连接) 和右外连接 (右连接)  
   自然连接.
 - ## **交叉连接**  
    - ### 原理  
      >1、从第一张表依次取出**每一条**记录。  
       2、取出每一条记录之后， 与另外一张表的全部记录**挨个匹配**  
       3、没有任何匹配条件，***所有的结果都会进行保留***。   
       4、记录数 = 第一张表记录数 * 第二张表记录数，字段数 = 第一张表字段数+第二张表字段数(笛卡尔积)。
    - ### 基本语法  
      > 表1 **cross join** 表2 ;  
    - ### 应用  
      没有实际应用。  
 - ## **内连接**  
    - ### 内连接:   
        inner join，从一张表中取出所有的记录去另外一张表中匹配 : 利用匹配条件进行匹配，成功了则保留，失败了放弃。  
    - ### 原理  
        >1、从第一张表中取出一-条记录，然后去**另外一张表中**进行**匹配**  
        2、利用**匹配条件**进行匹配:  
         2.1匹配成功 : **保留**，继续向下匹配  
         2.2匹配失败 : ***向下继续***，如果全表匹配失败，结束。
    - ### 基本语法  
        >表1 **[inner]** join 表2 **on** 匹配条件 (字段间关系) ;   

        **注意！**:   
        1💥如果内连接没有条件(其实允许)，那么其实就是交叉连接,要避免。  
        2💥使用匹配条件进行匹配。  
        3💥因为表的设计通常容易产生**同名字段**，尤其是ID,所以为了避免重名出现错误，通常使用 ***表名.字段名***，来确保 **唯一性**。  
        4💥通常,如果条件中使用到对应的表名，而表名通常比较长，所以可以通过表别名来简化.  
        5💥内连接匹配的时候，必须保证匹配到才会保存。  
        6💥内连接因为不强制必须使用匹配条件(on) 因此可以在数据匹配完成之后，使用where条件来限制，效果与on一样(建议使用on)   
    - ### 应用  
        >内连接通常是在对 **数据有精确要求** 的地方使用 : 必须保证 **两种表** 中都能进行 **数据匹配**。  
 - ## **外连接**  
    - ### 外链接
      outer join , 按照某一张表作为主表 (表中所有记录在最后都会保留)，根据条件去连接另外一张表，从而得到目标数据。  
      左连接：左表是主表    
      右链接：右表是主表  
    - ### 原理  
      1、确定连接主表: 左连接就是 **left join** 左边的表为主表; **right join** 就是右边为主表。  
      2、拿主表的每一条记录，去匹配另外- -张表(从表)的每一条记录。  
      3、如果满足匹配条件: 保留; 不满足不保留  
      4、如果主表记录在从表中一条都没有匹配成功，那么也要保留该记录： 从表对应的字段值都为NULL
    - ### 基本语法  
      >左连接: **主表** left join **从表** on 连接条件;  
      右连接: **从表** right join **主表** on 连接条件;  
    - ### 特点  
      1、外连接中 ***主表数据记录一定会保存*** : 连接之后不会出现**记录数少于主表** (内连接可能)  
      2、左连接和有连接其实可以 **互相转换**，但是数据对应的位置(表顺序)会改变。
    - ### 应用  
      非常常用的一种获取的数据方式 : 作为数据获取对应主表以及其他数据 (关联)。
 - ## **Using 关键字**    
    是在连接查询中用来 **代替** 对应的 ***on关键字*** 的，进行条件匹配。
    - ### 原理  
       1、在连接查询时，使用**on**的地方用**using**代替。  
       2、使用using的前提是 **对应的两张表连接的字段** 是 ***同名！***。(类似自然连接***自动匹配 )***  
       3、如果使用using关键字，那么对应的同名字段，最终在结果中只会**保留一个**。  
    - ### 基本语法  
       >表1 [inner,left,right] join 表2 using (**同名字段列表**);
 - ## **子查询**  
    子查询: **sub query** 
    >子查询是一种常用计算机语言 SELECT-SQL 语言中嵌套查询下层的程序模块。当一个查询是另一个查询的条件时，称之为子查询。  
    ***在一条select语句中嵌入第二个select语句。***  
    - ### 子查询与主查询的关系  
       1、子查询是 **嵌入** 到主查询中的。  
       2、子查询的 **辅助主查询** 的:要么作为**条件**，要么作为**数据源**。  
       3、子查询其实 **可以独立存在** : 是一条完整的 select 语句。  
    - ### 子查询的分类  
       >标量子查询 : 子查询返回的结果是**一个数据** (一行一列)  
       列子查询 : 返回的结果是**一列** (一列多行)。  
       行子查询 : 返回的结果是**一行** (一行多列)。  
       表子查询 : 返回的结果是**多行多列** (多行多列)。  
       Exists子查询 : 返回的结果1或者0 (类似布尔操作)。
    - ### 标量子查询  
  
       - 基本语法:  
        >select * from 数据源 where 条件判断 =/<> (select 字段名from 数据源 where 条件判断); //子查询得到的结果只有一个值。 
    - ### 列子查询  
      
       - 基本语法： 
        >主查询 where 条件 in (列子查询) ；集群
    - ### Exists子查询  
       Exists子查询:查询返回的结果只有0或者1，1代表成立，0代表不成立。 
       - 基本语法：  
        >where **exists** (查询语句) ; //exists就是根据查询得到的结果进行判断。  
        能够完成有效的条件查询

 
 


 
        


    

 
 

 





   
 
